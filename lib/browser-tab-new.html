<template>
	<style>
		:host {
			display: -webkit-box;
			display: flex;
			padding: 8px 25px 7px 40px;
			height: 29px;
			margin-left: -32px;
			min-width: 250px;
			max-width: 250px;
			-webkit-user-select: none;
			-moz-user-select: none;
			user-select: none;
			cursor: default;
			font-family: "Fira Sans Medium", Arial, sans-serif;
			width: 36px;
			min-width: 36px;
			padding-left: 25px;
		}

		:host(:hover) {
			position: relative;
			background: url("./img/tabBackgroundStart.svg") no-repeat left,
						url("./img/tabBackgroundEnd.svg") no-repeat right;
		}

		:host #favicon {
			background-image: url("./img/newTab-Icon.svg");
			width: 32px;
			height: 32px;
			background-size: 32px 32px;
			margin-top: 0px;
			margin-left: 2px;
		}

		:host(:active) {
			margin-top: 1px;
		}

	</style>
	<content>
		<div id="favicon"></div>
	</content>
</template>
<script>
	(function ()Â {
		'use strict';
		var prototype = Object.create(HTMLElement.prototype);
		var currentScript = document.currentScript;

		prototype.createdCallback = function() {
			var self = this;
			
			// Create shadow dom
			var shadow = this.createShadowRoot()
			var template = currentScript.ownerDocument.querySelector('template');
			shadow.appendChild(template.content.cloneNode(true));

			// Register new tab event
			this.addEventListener('click', function (evt) {
				addTab.call(self, evt);
			}, false);
		};
		
		/**
		 * Select the current tab
		 */
		function addTab(evt) {
			evt.stopPropagation();
			evt = new CustomEvent('add-tab', { detail: { source: this }});
			this.parentNode.dispatchEvent(evt);
		}

		/**
		 * Register the element protoype
		 */
		document.registerElement('browser-tab-new', {
			prototype: prototype
		});
	})();
</script>