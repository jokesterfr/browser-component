<template>
	<style>
		:host {
			display: -webkit-box;
			display: flex;
			-webkit-box-orient: vertical;
			flex-direction: column;
			background-color: #3c3b37;
			font-family: 'Fira Sans', Arial, sans-serif;
			min-height: 100%;
		}
		:host #browser {
			height: 100%;
			min-height: 100%;
			background: #ffcc00;
		}
	</style>
	<div>
		<content></content>
	</div>
</template>
<script>
	(function ()Â {
		'use strict';
		var prototype = Object.create(HTMLElement.prototype);
		var template = document.currentScript.ownerDocument.querySelector('template');

		prototype.createdCallback = function () {
			var shadow = this.createShadowRoot();
			shadow.appendChild(template.content.cloneNode(true));

			// Add browser against type
			switch (this.getAttribute('type')) {
				case 'webview':
					var webview = document.createElement('webview');
					webview.setAttribute('id', 'browser');
					var content = shadow.querySelector('content');
					content.parentNode.insertBefore(webview, content.nextSibling);
					break;
				case 'iframe':
					var iframe = document.createElement('iframe');
					iframe.setAttribute('id', 'browser');
					iframe.setAttribute('width', '100%');
					iframe.setAttribute('height', '100%');
					iframe.setAttribute('frameBorder', '0');
					iframe.setAttribute('seamless', 'seamless');
					iframe.setAttribute('sandbox', 'allow-forms allow-scripts allow-top-navigation allow-same-origin');
					var content = shadow.querySelector('content');
					content.parentNode.insertBefore(iframe, content.nextSibling);
				default:
					break;
			}
			this.addEventListener('select-tab', function (evt) {
				console.log('lfkdfldkjldfkjk')
			});

			this.addEventListener('location-changed', function (evt) {
				var uri = evt.detail.uri;
				shadow.querySelector('#browser').src = uri;
			});
		};

		prototype.attributeChangedCallback = function () {
			console.log('browser component attribute changed!!');
		};

		document.registerElement('browser-component', {
			prototype: prototype
		});
	})();
</script>